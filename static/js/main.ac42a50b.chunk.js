(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(60)},35:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),i=a.n(c),s=a(63),o=(a(35),a(4)),l=a(5),u=a(8),m=a(7),h=a(9),p=a(62),d=a(61),b=a(64),f=a(27),v=new(function(){function e(){Object(o.a)(this,e),this.auth0=new f.a.WebAuth({domain:"enming.auth0.com",audience:"https://enming.auth0.com/userinfo",clientID:"9EgWOUQPXNQ0h9Q59kB3c9xRa7Vyysv3",redirectUri:"http://localhost:3000/callback",responseType:"id_token",scope:"openid profile"}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this)}return Object(l.a)(e,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise(function(t,a){e.auth0.parseHash(function(n,r){return n?a(n):r&&r.idToken?(e.idToken=r.idToken,e.profile=r.idTokenPayload,e.expiresAt=1e3*r.idTokenPayload.exp,void t()):a(n)})})}},{key:"signOut",value:function(){this.idToken=null,this.profile=null,this.expiresAt=null}}]),e}());var E=Object(b.a)(function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-primary fixed-top"},r.a.createElement(d.a,{className:"navbar-brand",to:"/"},"Blog App"),!v.isAuthenticated()&&r.a.createElement("button",{className:"btn btn-dark",onClick:v.signIn},"Sign In"),v.isAuthenticated()&&r.a.createElement("div",null,r.a.createElement("label",{className:"mr-2 text-white"},v.getProfile().name),r.a.createElement("button",{className:"btn btn-dark",onClick:function(){v.signOut(),e.history.replace("/")}},"Sign Out")))}),y=a(3),k=a.n(y),O=a(11),j=a(14),g=a.n(j),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={posts:null},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("http://localhost:8081/");case 2:t=e.sent.data,this.setState({posts:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(d.a,{to:"/new-post"},r.a.createElement("div",{className:"card text-white bg-secondary mb-3"},r.a.createElement("div",{className:"card-header"},"Make a new post!"),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},"+ New Post"),r.a.createElement("p",{className:"card-text"},"Share your project with everyone!")))),null===this.state.posts&&r.a.createElement("p",null,"Loading posts..."),this.state.posts&&this.state.posts.map(function(e){return r.a.createElement("div",{key:e.id,className:"col-sm-12 col-md-4 col-lg-3"},r.a.createElement(d.a,{to:"/post/".concat(e.id)},r.a.createElement("div",{className:"card text-white bg-success mb-3"},r.a.createElement("div",{className:"card-header"},"Comments: ",e.comments),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},e.content)))))})))}}]),t}(n.Component),w=a(15),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={comment:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"updateComment",value:function(e){this.setState({comment:e})}},{key:"submit",value:function(){this.props.submitComment(this.state.comment),this.setState({comment:""})}},{key:"render",value:function(){var e=this;return v.isAuthenticated()?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-group text-center"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Comment:"),r.a.createElement("input",{type:"text",onChange:function(t){e.updateComment(t.target.value)},className:"form-control",placeholder:"Share your comment.",value:this.state.answer})),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){e.submit()}},"Submit"),r.a.createElement("hr",{className:"my-4"})):null}}]),t}(n.Component),C=Object(b.a)(x),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={post:null},a.submitComment=a.submitComment.bind(Object(w.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshPost();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"refreshPost",value:function(){var e=Object(O.a)(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,e.next=3,g.a.get("http://localhost:8081/".concat(t.postId));case 3:a=e.sent.data,this.setState({post:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"submitComment",value:function(){var e=Object(O.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("http://localhost:8081/comment/".concat(this.state.post.id),{comment:t},{headers:{Authorization:"Bearer ".concat(v.getIdToken())}});case 2:return e.next=4,this.refreshPost();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.post;return null===e?r.a.createElement("p",null,"Loading ..."):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"jumbotron col-12"},r.a.createElement("h1",{className:"display-3"},e.title),r.a.createElement("p",{className:"lead"},e.content),r.a.createElement("hr",{className:"my-4"}),r.a.createElement(C,{postId:e.id,submitComment:this.submitComment}),r.a.createElement("p",null,"Comments:"),e.comments.map(function(e,t){return r.a.createElement("p",{className:"lead",key:t},e.comment)}))))}}]),t}(n.Component),I=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.handleAuthentication();case 2:this.props.history.replace("/");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("p",null,"Loading profile...")}}]),t}(n.Component),T=Object(b.a)(I);var P=function(e){var t=e.component,a=e.path;return r.a.createElement(p.a,{path:a,render:function(){return v.isAuthenticated()?r.a.createElement(t,null):(v.signIn(),r.a.createElement("div",null))}})},S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={disabled:!1,title:"",content:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"updateContent",value:function(e){this.setState({content:e})}},{key:"updateTitle",value:function(e){this.setState({title:e})}},{key:"submit",value:function(){var e=Object(O.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({disabled:!0}),e.next=3,g.a.post("http://localhost:8081",{title:this.state.title,content:this.state.description},{headers:{Authorization:"Bearer ".concat(v.getIdToken())}});case 3:this.props.history.push("/");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-primary"},r.a.createElement("div",{className:"card-header"},"New Post"),r.a.createElement("div",{className:"card-body text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Title:"),r.a.createElement("input",{disabled:this.state.disabled,type:"text",onBlur:function(t){e.updateTitle(t.target.value)},className:"form-control",placeholder:"Give your question a title."})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Content:"),r.a.createElement("input",{disabled:this.state.disabled,type:"text",onBlur:function(t){e.updateContent(t.target.value)},className:"form-control",placeholder:"Give more context to your post."})),r.a.createElement("button",{disabled:this.state.disabled,className:"btn btn-primary",onClick:function(){e.submit()}},"Submit"))))))}}]),t}(n.Component),B=Object(b.a)(S),D=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(p.a,{exact:!0,path:"/",component:N}),r.a.createElement(p.a,{exact:!0,path:"/post/:postId",component:A}),r.a.createElement(p.a,{exact:!0,path:"/callback",component:T}),r.a.createElement(P,{path:"/new-post",component:B}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.ac42a50b.chunk.js.map